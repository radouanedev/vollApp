<ion-header>
    <ion-toolbar>
        <ion-title>
            Ajouter une avion
        </ion-title>
        <ion-buttons start>
            <button ion-button (click)="dismiss()">
                <span ion-text color="primary" showWhen="ios">Annuler</span>
                <ion-icon name="md-close" showWhen="android, windows"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content padding>

    <form novalidate
          (ngSubmit)="addAvion()"
          [formGroup]="myform">

        <ion-grid>

            <ion-row>
                <ion-col>
                    <ion-item>

                        <ion-input [(ngModel)]="avion.nom"
                                   formControlName="nom"
                                   name="nom"
                                   type="text"
                                   placeholder="Nom" > </ion-input>

                    </ion-item>

                    <s-errors [control]="myform.controls.nom" [messages]="myform.nomMessages"></s-errors>
                </ion-col>
            </ion-row>

            <ion-row>
                <ion-col>
                    <ion-item>

                        <ion-textarea [(ngModel)]="avion.description"
                                   formControlName="description"
                                   type="text"
                                   name="description"
                                   placeholder="Description"> </ion-textarea>

                    </ion-item>

                    <s-errors [control]="myform.controls.description" [messages]="myform.descriptionMessages"></s-errors>
                </ion-col>
            </ion-row>

            <ion-row>
                <ion-col>
                    <ion-item>

                        <ion-input [(ngModel)]="avion.nbrePlcMax"
                                   formControlName="nbrePlcMax"
                                   type="number"
                                   name="nbrePlcMax"
                                   placeholder="Nombre max de place"> </ion-input>

                    </ion-item>

                    <s-errors [control]="myform.controls.nbrePlcMax" [messages]="myform.nbrePlcMaxMessages"></s-errors>
                </ion-col>
            </ion-row>

            <ion-row padding-top text-center>
                <ion-col>
                    <button ion-button small icon-left color="light" (click)="upload()" >
                        <ion-icon ios="ios-folder-open"  md="md-folder-open"></ion-icon>
                        Choisir image d'avion
                    </button>

                    <span class="text-md-danger" class="errorText" *ngIf="imageError">{{imageError}}</span>
                </ion-col>
            </ion-row>


            <ion-row padding-top>
                <ion-col>
                    <button ion-button color="primary" type="submit"
                            [disabled]="myform.invalid && !imageError" block>Ajouter</button>
                </ion-col>
            </ion-row>
        </ion-grid>

    </form>

</ion-content>